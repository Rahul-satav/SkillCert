<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>SkillCert â€” Instant Certificates</title>
  <meta name="description" content="Get a professional, recruiter-ready certificate by passing a quick 5-question skill test. Perfect for resume and jobs."/>
  <link rel="icon" href="assets/logo.svg"/>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet"/>
  <!-- Export libs -->
  <script src="https://cdn.jsdelivr.net/npm/html-to-image@1.11.11/dist/html-to-image.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>

  <style>
    :root { --indigo:#6366f1; --cyan:#06b6d4; --emerald:#10b981; --gold1:#fde68a; --gold2:#fbbf24; --gold3:#f59e0b; }
    body { font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; background:#f6f9fc; }
    .hero {
      background:
        radial-gradient(900px 380px at 10% -20%, rgba(99,102,241,.28), transparent 60%),
        radial-gradient(1100px 460px at 100% -10%, rgba(6,182,212,.28), transparent 60%),
        linear-gradient(135deg, #4f46e5, #06b6d4 60%, #14b8a6);
    }
    .card { transition: transform .15s ease, box-shadow .2s ease; }
    .card:hover { transform: translateY(-3px); box-shadow: 0 25px 40px rgba(2,6,23,.10); }

    /* ===== Fixed A4 landscape canvas (identical on phone & desktop) ===== */
    .cert-canvas { width:1654px; height:1169px; }
    .cert-canvas * { -webkit-text-size-adjust:100%; text-size-adjust:100%; }

    .cert-paper { background:#fff; border:6px solid #5b6ee5; border-radius:22px; position:relative; }
    .cert-inner { border:3px solid #c7d2fe; border-radius:16px; height:100%; }

    .orn { position:absolute; width:120px; height:120px; opacity:.85; }
    .orn svg { width:100%; height:100%; }
    .orn.tl { left:-8px; top:-6px; transform:rotate(0deg); }
    .orn.tr { right:-8px; top:-6px; transform:scaleX(-1); }
    .orn.bl { left:-8px; bottom:-6px; transform:scaleY(-1); }
    .orn.br { right:-8px; bottom:-6px; transform:scale(-1); }

    .cert-title { letter-spacing:.08em; color:#5a4633; }
    .fancy-hr { position:relative; height:2px; background:#3b82f6; margin:12px 0 18px; }
    .fancy-hr::before,.fancy-hr::after{ content:""; position:absolute; top:50%; width:8px;height:8px; background:#38bdf8; border:2px solid #0ea5e9; border-radius:9999px; transform:translateY(-50%);}
    .fancy-hr::before{ left:-14px;} .fancy-hr::after{ right:-14px;}

    .medal{
      width:88px;height:88px;border-radius:9999px;
      background:radial-gradient(circle at 35% 35%, var(--gold1), var(--gold2) 45%, var(--gold3));
      box-shadow: inset 0 6px 12px rgba(0,0,0,.08), 0 8px 18px rgba(0,0,0,.15);
      display:flex;align-items:center;justify-content:center;color:#fff;font-weight:800;font-size:28px;border:4px solid #fef08a;
    }

    /* modal */
    .modal{ display:none; } .modal.show{ display:flex; }
  </style>
</head>
<body class="min-h-screen flex flex-col">

  <!-- Header -->
  <header class="bg-white/80 backdrop-blur border-b">
    <div class="max-w-6xl mx-auto px-4 py-3 flex items-center justify-between">
      <div class="flex items-center gap-2">
        <img src="assets/logo.svg" class="h-6 w-6" alt="logo">
        <span class="font-semibold">SkillCert â€” Instant Certificates</span>
      </div>
      <nav class="text-sm text-slate-600 flex gap-4">
        <a href="#skills" class="hover:text-indigo-600">Skills</a>
        <a href="#form" class="hover:text-indigo-600">Details</a>
        <a href="#quiz" class="hover:text-indigo-600">Quiz</a>
      </nav>
    </div>
  </header>

  <!-- Hero -->
  <section class="hero text-white border-b">
    <div class="max-w-6xl mx-auto px-4 py-12">
      <h1 class="text-3xl md:text-5xl font-extrabold tracking-tight">ðŸš€ Get Instant Verified Certificates</h1>
      <p class="mt-3 opacity-95 text-sm md:text-base">Perfect for resumes & jobs â€¢ Pass a 5-question test â€¢ Auto-download a professional certificate</p>
      <div class="mt-4 flex flex-wrap gap-2 text-xs">
        <span class="px-2 py-1 rounded-full bg-white/15 border border-white/30">Recruiter-friendly</span>
        <span class="px-2 py-1 rounded-full bg-white/15 border border-white/30">Looks premium</span>
        <span class="px-2 py-1 rounded-full bg-white/15 border border-white/30">Fast & simple</span>
      </div>
    </div>
  </section>

  <main class="max-w-6xl mx-auto px-4 py-8 space-y-8">

    <!-- Skills -->
    <section id="skills" class="rounded-2xl border bg-white p-4">
      <div class="flex items-center justify-between">
        <h2 class="text-base font-semibold">Choose Your Skill</h2>
        <p class="text-xs text-slate-500">50+ options â€¢ or type your own below</p>
      </div>
      <div id="skillsGrid" class="mt-3 grid grid-cols-2 sm:grid-cols-4 lg:grid-cols-6 gap-2"></div>
    </section>

    <!-- Details -->
    <section id="form" class="rounded-2xl border bg-white p-4">
      <h2 class="text-base font-semibold mb-3">Your Details</h2>
      <div class="grid sm:grid-cols-3 gap-3">
        <label class="block text-sm">Full Name
          <input id="userName" class="mt-1 w-full rounded-lg border px-3 py-2" placeholder="e.g., R S Satav">
        </label>
        <label class="block text-sm">Email (demo)
          <input id="userEmail" class="mt-1 w-full rounded-lg border px-3 py-2" placeholder="rahul@gmail.com">
        </label>
        <label class="block text-sm">Selected Skill (editable)
          <input id="skillName" class="mt-1 w-full rounded-lg border px-3 py-2" placeholder="e.g., Java">
        </label>
      </div>
      <div class="mt-3">
        <button id="startQuizBtn" class="px-4 py-2 rounded-xl text-white bg-gradient-to-r from-[var(--indigo)] via-[var(--cyan)] to-[var(--emerald)] shadow">
          Start 5-Question Quiz
        </button>
        <span class="text-xs text-slate-500 ml-2">Email must be <b>rahul@gmail.com</b> (demo).</span>
      </div>
    </section>

    <!-- Quiz -->
    <section id="quiz" class="hidden rounded-2xl border bg-white p-4">
      <div class="flex items-center justify-between">
        <h2 class="text-base font-semibold">Quick Test â€¢ <span id="quizSkill"></span></h2>
        <p class="text-xs text-slate-500">Score â‰¥ <b>80%</b> to earn a certificate</p>
      </div>
      <div id="quizContainer" class="mt-3 space-y-4"></div>
      <div class="mt-4 flex items-center gap-3">
        <button id="submitQuizBtn" class="px-4 py-2 rounded-xl bg-slate-900 text-white">Submit Quiz</button>
        <p id="quizResult" class="text-sm font-medium"></p>
      </div>
    </section>

    <!-- Certificate Preview (scaled visually only) -->
    <section id="certArea" class="hidden">
      <div class="mx-auto w-full overflow-auto flex justify-center">
        <div class="origin-top scale-[0.6] sm:scale-[0.7] md:scale-[0.8] lg:scale-[0.9]">
          <div id="certCard" class="relative cert-paper cert-canvas overflow-hidden">
            <!-- Ornaments -->
            <div class="orn tl"><svg viewBox="0 0 120 120" fill="#6578ff"><path d="M12 90c18-10 35-27 45-45 12-21 32-33 53-37-20 12-33 29-44 49-10 18-28 32-54 33z"/></svg></div>
            <div class="orn tr"><svg viewBox="0 0 120 120" fill="#6578ff"><path d="M12 90c18-10 35-27 45-45 12-21 32-33 53-37-20 12-33 29-44 49-10 18-28 32-54 33z"/></svg></div>
            <div class="orn bl"><svg viewBox="0 0 120 120" fill="#6578ff"><path d="M12 90c18-10 35-27 45-45 12-21 32-33 53-37-20 12-33 29-44 49-10 18-28 32-54 33z"/></svg></div>
            <div class="orn br"><svg viewBox="0 0 120 120" fill="#6578ff"><path d="M12 90c18-10 35-27 45-45 12-21 32-33 53-37-20 12-33 29-44 49-10 18-28 32-54 33z"/></svg></div>

            <!-- ===== Improved balanced layout ===== -->
            <div class="cert-inner rounded-[12px] flex flex-col justify-between h-full p-12">
              <!-- Top content -->
              <div>
                <div class="text-center">
                  <div class="text-[58px] font-extrabold cert-title tracking-[.08em]">CERTIFICATE</div>
                  <div class="mt-1 text-[16px] tracking-[0.25em] text-slate-600 font-semibold">OF TAKING SKILL TEST</div>
                  <div class="mt-6 text-[14px] tracking-wide text-slate-600">This Certificate Is Presented To</div>
                  <div id="certName" class="mt-2 text-[72px] font-extrabold text-[#3157d4] capitalize">Candidate</div>
                </div>

                <div class="mx-[120px] mt-6"><div class="fancy-hr"></div></div>

                <div class="mt-4 text-center text-[18px] text-slate-700 leading-relaxed px-[120px]">
                  Has successfully completed the <b id="certSkill">Skill</b> skill test,
                  demonstrating exceptional professional expertise with a score
                  <b id="certScore">80%</b>, earning a <b id="certLevel">Proficient</b> level certification.
                </div>
              </div>

              <!-- Footer (pulled up a bit with mt-10) -->
              <div class="mt-10 grid grid-cols-2 gap-6 px-[70px] pb-[28px]">
                <div class="flex items-center gap-4">
                  <div id="medal" class="medal">2</div>
                  <div class="text-[12px] text-slate-500">
                    Date: <span id="certDate"></span><br/>
                    Issued by <b>Rahul Shahaji Satav</b>
                  </div>
                </div>

                <div class="flex items-end justify-end">
                  <div class="text-right leading-tight">
                    <div class="flex items-center justify-end gap-2">
                      <img src="assets/logo.svg" class="h-7 w-7" alt="logo">
                      <div class="text-[28px] font-bold" style="background:linear-gradient(90deg,#2563eb,#06b6d4); -webkit-background-clip:text; color:transparent">SkillCert</div>
                    </div>
                    <!-- Clean Verify line (short text; link points to full encoded URL) -->
                    <div class="mt-1 text-[12px] text-slate-500 leading-tight">
                      UID: <span id="certUID">â€”</span><br/>
                      Verify at:
                      <a id="certVerifyText"
                         class="underline text-slate-600"
                         href="#"
                         target="_blank"
                         rel="noopener">https://rahul-satav.github.io/SkillCert/verify.html</a>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- ===== /Improved layout ===== -->
          </div>
        </div>
      </div>
    </section>

  </main>

  <footer class="py-8 text-center text-xs text-slate-500">
    Â© <span id="year"></span> SkillCert â€¢ Recruiter-ready, professional certificates.
  </footer>

  <!-- Fail Modal -->
  <div id="failModal" class="modal fixed inset-0 bg-black/50 backdrop-blur-sm items-center justify-center p-4 z-50">
    <div class="w-full max-w-sm rounded-2xl bg-white shadow-xl p-5">
      <div class="flex items-start gap-3">
        <div class="mt-1 shrink-0 w-10 h-10 rounded-full bg-rose-100 text-rose-700 flex items-center justify-center text-lg">âœ–</div>
        <div>
          <h3 class="text-base font-semibold">You didnâ€™t pass this time</h3>
          <p class="text-sm text-slate-600 mt-1">You need at least <b>80%</b>. Review and try again â€” youâ€™ve got this!</p>
        </div>
      </div>
      <div class="mt-4 flex gap-2 justify-end">
        <button id="closeFail" class="px-3 py-1.5 rounded-lg border bg-white">Close</button>
        <button id="retakeBtn" class="px-3 py-1.5 rounded-lg text-white" style="background: linear-gradient(90deg, var(--indigo), var(--cyan));">ðŸ”„ Retake quiz</button>
      </div>
    </div>
  </div>

<script>
  const $  = s => document.querySelector(s);
  const $$ = s => Array.from(document.querySelectorAll(s));
  const fancyScroll = id => window.scrollTo({top: document.querySelector(id).offsetTop - 70, behavior:'smooth'});

  /* Skills */
  const skills = [
    "Java + Spring Boot","Angular","React","Node.js","Python","Django","Flask","FastAPI",
    "C","C++","C#",".NET","Ruby on Rails","Go","Rust","Kotlin","Swift","Objective-C",
    "Android","iOS","React Native","Flutter","HTML & CSS","JavaScript","TypeScript",
    "SQL","NoSQL","MongoDB","PostgreSQL","MySQL","Firebase","GraphQL","REST APIs",
    "Docker","Kubernetes","DevOps","CI/CD","Git & GitHub","Linux","Bash","Networking",
    "AWS","Azure","GCP","Cloud Security","Cyber Security","Ethical Hacking","Pen-Testing",
    "Data Analysis","Power BI","Tableau","Excel","Pandas","NumPy","Machine Learning",
    "Deep Learning","NLP","Computer Vision","MLOps","Data Engineering","Spark","Hadoop",
    "Salesforce","ServiceNow","QA Automation","Selenium","Playwright","Cypress","JMeter",
    "UI/UX Design","Figma","Canva","Business Analytics","Blockchain","Web3","Solidity"
  ];
  const skillsGrid = $("#skillsGrid");
  skills.forEach(s=>{
    const b = document.createElement('button');
    b.textContent = s;
    b.className = "card px-3 py-2 rounded-lg border bg-white hover:bg-indigo-50 text-sm";
    b.onclick = () => { $("#skillName").value = s; fancyScroll('#form'); };
    skillsGrid.appendChild(b);
  });

  /* Question bank */
  const bank = {
    "Java + Spring Boot":[
      {q:"Which annotation starts a Spring Boot app?",a:["@SpringBootApplication","@EnableAutoConfiguration","@ComponentScan","@RestController"],c:0},
      {q:"Default embedded server?",a:["Tomcat","Jetty","Undertow","Netty"],c:0},
      {q:"Config file?",a:["application.properties","pom.xml","settings.gradle","bootstrap.yml"],c:0},
      {q:"JPA stands forâ€¦",a:["Java Persistence API","Java Package API","Java Processing API","JSON Persistence API"],c:0},
      {q:"Maps HTTP GET:",a:["@GetMapping","@PostMapping","@RequestBody","@PathVariable"],c:0}
    ],
    "React":[
      {q:"React state updates areâ€¦",a:["Asynchronous","Synchronous","Blocking","None"],c:0},
      {q:"JSX compiles toâ€¦",a:["React.createElement","HTML strings","DOM nodes","CSS"],c:0},
      {q:"Hook for side effects?",a:["useEffect","useState","useMemo","useRef"],c:0},
      {q:"Keys in lists should beâ€¦",a:["Stable & unique","Random each render","Index always","Same for all"],c:0},
      {q:"To lift state up youâ€¦",a:["Move state to common parent","Use context only","Global variable","Refs only"],c:0}
    ],
    "AWS":[
      {q:"S3 is used forâ€¦",a:["Object storage","Compute","Queues","DB"],c:0},
      {q:"EC2 providesâ€¦",a:["Virtual servers","Object storage","Data warehouse","Email"],c:0},
      {q:"Lambda isâ€¦",a:["Serverless compute","File storage","VPC","CDN"],c:0},
      {q:"RDS managesâ€¦",a:["Relational DBs","Queues","Monitoring","DNS"],c:0},
      {q:"CloudFront is aâ€¦",a:["CDN","SQL engine","IDE","OS"],c:0}
    ],
    "SQL":[
      {q:"Which keyword returns rows?",a:["SELECT","PUT","FIND","GET"],c:0},
      {q:"JOIN combines rows fromâ€¦",a:["Multiple tables","One column","File system","Logs"],c:0},
      {q:"To filter rows useâ€¦",a:["WHERE","ORDER","GROUP","HAVING only"],c:0},
      {q:"Aggregate function?",a:["COUNT","PRINT","SUMIF","MAP"],c:0},
      {q:"Primary key isâ€¦",a:["Unique identifier","A foreign key","A view","A file"],c:0}
    ]
  };

  /* Start quiz */
  $("#startQuizBtn").addEventListener('click', () => {
    const name  = $("#userName").value.trim();
    const email = $("#userEmail").value.trim();
    const skill = $("#skillName").value.trim();
    if(!name || !email || !skill){ toast("Please enter your name, email and skill."); return; }
    if(email.toLowerCase() !== "rahul@gmail.com"){ toast("For demo, email must be rahul@gmail.com"); return; }

    const set = bank[skill] || [
      {q:`${skill}: Which statement is true?`,a:["It improves with practice","It cannot be measured","Only theory matters","None"],c:0},
      {q:"A strong portfolio showsâ€¦",a:["Applied skill","Only certs","Only grades","Only theory"],c:0},
      {q:"Version control used isâ€¦",a:["Git","SVN only","Zip files","Email"],c:0},
      {q:"Writing tests helpsâ€¦",a:["Quality & confidence","Slows everything","Costs only","Nothing"],c:0},
      {q:"Docs should beâ€¦",a:["Clear & updated","Skipped","Private only","Screenshots"],c:0}
    ];

    $("#quizContainer").innerHTML = "";
    set.slice(0,5).forEach((item,idx)=>{
      const div = document.createElement('div');
      div.className = "rounded-xl border p-3 bg-white/80";
      div.innerHTML = `
        <p class="font-medium">${idx+1}. ${item.q}</p>
        <div class="mt-2 grid sm:grid-cols-2 gap-2">
          ${item.a.map((opt,i)=>`
            <label class="inline-flex items-center gap-2 text-sm">
              <input type="radio" name="q${idx}" value="${i}">
              <span>${opt}</span>
            </label>`).join('')}
        </div>`;
      $("#quizContainer").appendChild(div);
    });
    $("#quizSkill").textContent = skill;
    $("#quiz").classList.remove('hidden');
    fancyScroll('#quiz');
  });

  /* Submit quiz */
  const failModal = $("#failModal");
  const closeFail = $("#closeFail");
  const retakeBtn = $("#retakeBtn");

  $("#submitQuizBtn").addEventListener('click', async () => {
    let score = 0;
    for(let i=0;i<5;i++){
      const chosen = document.querySelector(`input[name="q${i}"]:checked`);
      if(chosen && Number(chosen.value)===0) score++; // in our banks, index 0 is correct
    }
    const pct = Math.round((score/5)*100);
    const res = $("#quizResult");
    res.textContent = `Score: ${score}/5 (${pct}%)`;
    res.className = "text-sm font-medium " + (pct>=80?"text-emerald-600":"text-rose-600");

    if(pct>=80){
      buildCertificate(pct);
      await new Promise(r=>setTimeout(r,200));
      autoDownloadPDF();
    } else {
      failModal.classList.add('show','flex');
    }
  });

  closeFail.addEventListener('click', ()=> failModal.classList.remove('show','flex'));
  retakeBtn.addEventListener('click', ()=> {
    for (let i=0;i<5;i++){
      document.querySelectorAll(`input[name="q${i}"]`).forEach(inp=>inp.checked=false);
    }
    $("#quizResult").textContent="";
    failModal.classList.remove('show','flex');
    fancyScroll('#quiz');
  });

  function computeLevel(pct){
    if(pct>=93) return {level:"Advanced", medal:"1"};
    if(pct>=85) return {level:"Proficient", medal:"2"};
    return {level:"Intermediate", medal:"3"};
  }

  /* UID + Verify */
  function makeUID(n=8){
    const chars="ABCDEFGHJKLMNPQRSTUVWXYZ23456789"; // avoid confusing chars
    let out=""; for(let i=0;i<n;i++) out += chars[Math.floor(Math.random()*chars.length)];
    return out;
  }
  function baseURL(){
    // e.g., https://rahul-satav.github.io/SkillCert/
    return (location.origin + location.pathname).replace(/\/[^\/]*$/, '/');
  }

  function buildCertificate(pct){
    const name  = $("#userName").value.trim();
    const skill = $("#skillName").value.trim();
    const {level, medal} = computeLevel(pct);
    const date  = new Date().toLocaleDateString();

    $("#certName").textContent  = name;
    $("#certSkill").textContent = skill;
    $("#certScore").textContent = `${pct}%`;
    $("#certLevel").textContent = level;
    $("#medal").textContent     = medal;
    $("#certDate").textContent  = date;

    // Create UID + payload
    const uid = makeUID(8);
    const payload = btoa(encodeURIComponent(JSON.stringify({uid,name,skill,score:pct,level,date})));
    const fullVerifyLink = `${baseURL()}verify.html?p=${payload}`;
    const shortVerifyText = `${baseURL()}verify.html`;

    $("#certUID").textContent = uid;
    // show short text, keep full encoded link in href
    const a = document.getElementById('certVerifyText');
    a.textContent = shortVerifyText;
    a.href = fullVerifyLink;

    // (optional) expose globally
    window.__lastVerifyLink = fullVerifyLink;

    $("#certArea").classList.remove('hidden');
  }

  /* Export PDF */
  async function autoDownloadPDF(){
    const node = document.getElementById('certCard');
    try { if (document.fonts && document.fonts.ready) await document.fonts.ready; } catch(e){}
    await Promise.all([...node.querySelectorAll('img')].map(img=>{
      if(img.complete && img.naturalWidth>0) return;
      return new Promise(res=>{ img.onload=res; img.onerror=res; });
    }));
    const W = 1654, H = 1169;
    try{
      const dataUrl = await htmlToImage.toPng(node, {
        pixelRatio: 2, cacheBust: true, width: W, height: H,
        style: { transform:'scale(1)', width: W+'px', height: H+'px' }
      });
      const { jsPDF } = window.jspdf;
      const pdf = new jsPDF({orientation:'landscape', unit:'pt', format:'a4'});
      const pageW = pdf.internal.pageSize.getWidth(), pageH = pdf.internal.pageSize.getHeight();
      const r = Math.min(pageW/W, pageH/H), w = W*r, h = H*r;
      pdf.addImage(dataUrl,'PNG',(pageW-w)/2,(pageH-h)/2,w,h);
      pdf.save('SkillCert_Certificate.pdf');
      window.scrollTo({top:0,behavior:'smooth'});
      toast("ðŸŽ‰ Certificate downloaded! UID & clean verify line added.");
    }catch(e){
      console.error(e);
      toast("PDF export failed. Refresh and try again.");
    }
  }

  /* Toast */
  function toast(msg){
    const el=document.createElement('div');
    el.textContent=msg;
    el.className="fixed left-1/2 -translate-x-1/2 bottom-6 px-4 py-2 rounded-xl text-white text-sm shadow-lg z-50";
    el.style.background="linear-gradient(90deg, var(--indigo), var(--cyan), var(--emerald))";
    document.body.appendChild(el);
    setTimeout(()=>{ el.style.opacity='.0'; el.style.transition='opacity .5s'; setTimeout(()=>el.remove(),500); },2200);
  }

  document.getElementById('year').textContent = new Date().getFullYear();
</script>
</body>
</html>
